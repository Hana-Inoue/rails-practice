<div class="events">
  <h1><%= t('events.index.title') %></h1>

  <h3 class="form-title">イベント検索</h2>
  <%= form_with(scope: :search,
                url: search_events_path,
                method: :get,
                local: true) do |form| %>
    <div class="form">
      <%= form.label :title, t('events.index.labels.title') %>
      <%= form.text_field :title %>
    </div>

    <div class="form">
      <%= form.label :start_at, t('events.index.labels.start_at') %>
      <%= form.datetime_select :start_at,
                           prompt: '--',
                           use_month_numbers: true,
                           start_year: Time.now.year,
                           end_year: Time.now.year + 2,
                           date_separator: '/ ' %>
    </div>

    <div class="form">
      <%= form.label :finish_at, t('events.index.labels.finish_at') %>
      <%= form.datetime_select :finish_at,
                           prompt: '--',
                           use_month_numbers: true,
                           start_year: Time.now.year,
                           end_year: Time.now.year + 2,
                           date_separator: '/ ' %>
    </div>

    <div class="form">
      <%= form.label :max_participants, t('events.index.labels.max_participants') %>
      <%= form.select :max_participants,
                      [['1~5', 1..5],
                       ['6~10', 6..10],
                       ['11~20', 11..20],
                       ['21~30', 21..30],
                       ['31~', 31..]],
                      include_blank: true %>
    </div>

    <div class="form">
      <%= form.label :body, t('events.index.labels.body') %>
      <%= form.text_field :body %>
    </div>

    <div class="form">
      <%= form.label :host, t('events.index.labels.host') %>
      <%= form.text_field :host %>
    </div>

    <div class="buttons">
      <%= form.submit t('events.index.links.search') %>
    </div>
  <% end %>


  <% if current_user.authorized?('events', 'new') %>
    <p class="button new-event"><%= link_to t('events.index.links.new'), new_event_path %></p>
  <% end %>

  <table class="table">
    <thead>
      <tr>
        <th><%= Event.human_attribute_name(:id) %></th>
        <th><%= Event.human_attribute_name(:title) %></th>
        <th><%= t('events.index.labels.start_and_finish_datetime') %></th>
        <th><%= Event.human_attribute_name(:max_participants) %></th>
        <th><%= Event.human_attribute_name(:body) %></th>
        <th><%= Event.human_attribute_name(:host) %></th>
      </tr>
    </thead>
    <tbody>
      <% @events.each do |event| %>
        <tr>
          <td><%= event.id %></td>
          <td><%= link_to event.title, event %></td>
          <td><%= event.start_and_finish_datetime %></td>
          <td><%= event.max_participants %></td>
          <td><%= event.body %></td>
          <td><%= event.host %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <%= render 'shared/pagination', pages: @pages %>
</div>
